plugins {
  id "com.github.spotbugs" version "1.6.1"
}

apply plugin: 'java'
apply plugin: 'eclipse'
apply plugin: 'jacoco'

repositories {
	mavenCentral()
}

spotbugs {
	toolVersion = '3.1.3'
  	effort = "max"
 	reportLevel = "high"
  	visitors = ["FindSqlInjection", "SwitchFallthrough"]
  	omitVisitors = ["FindNonShortCircuit"]
}

// To generate an HTML report instead of XML
tasks.withType(com.github.spotbugs.SpotBugsTask) {
  reports {
    xml.enabled = false
    html.enabled = true
  }
} 

task wrapper(type: Wrapper) {
    gradleVersion = '4.7'
}

// In this section you declare the dependencies for your production and test code
dependencies {
    testCompile 'junit:junit:4.12'
    compile 'com.google.code.findbugs:jsr305:3.0.2'
}

jar {
     from sourceSets.main.allSource
 }
 
test {
 	testLogging {
      exceptionFormat = 'full'
      events "failed"//, "skipped", "passed"
      afterSuite { desc, result ->
        if (!desc.parent) { 
            println "\n${result.testCount} ran | ${result.successfulTestCount} passed | ${result.failedTestCount} failed | ${result.skippedTestCount} skipped\n"
        }
      }
    }
 }